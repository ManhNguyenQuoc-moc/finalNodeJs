<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <title>
    <%= title || "Admin Console" %>
  </title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        container: { center: true, padding: '1rem' },
        extend: {
          colors: {
            brand: {
              50: '#ecfdf5',
              100: '#d1fae5',
              200: '#a7f3d0',
              300: '#6ee7b7',
              400: '#34d399',
              500: '#10b981',
              600: '#059669',
              700: '#047857',
              800: '#065f46',
              900: '#064e3b'
            }
          },
          boxShadow: {
            soft: '0 8px 30px rgba(15,23,42,.06)',
            lift: '0 12px 32px rgba(15,23,42,.10)'
          }
        }
      }
    }
  </script>

  <!-- Lucide icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      lucide.createIcons();
    });
  </script>

  <!-- React -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Babel -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Recharts MUST load AFTER React -->
  <script src="https://unpkg.com/recharts/umd/Recharts.min.js"></script>

</head>

<body class="bg-slate-950 text-slate-100 antialiased">
  <!-- Root: full height, chia 2 cột -->
  <div class="h-screen flex bg-slate-950" x-data="{
      open: true,
      mini: false,
      // activePath từ server nếu có, fallback về window.location.pathname
      activePath: '<%= (typeof activePath !== " undefined" && activePath) ? activePath : '' %>' ||
    window.location.pathname
    }"
    >
    <!-- Sidebar -->
    <%- include('../partials/_sidebar') %>

      <!-- Content -->
      <div class="flex-1 flex flex-col h-screen bg-white">
        <!-- Topbar -->
        <%- include('../partials/_topbar') %>

          <!-- Main -->
          <main class="flex-1 overflow-y-auto">
            <div class="p-6 max-w-[1400px] w-full mx-auto">
              <% if (flash && flash.success) { %>
                <!-- Alert success -->
                <% } %>

                  <% if (flash && flash.error) { %>
                    <!-- Alert error -->
                    <% } %>

                      <%- body %>
            </div>
          </main>

          <!-- Footer -->
          <footer class="shrink-0 border-t bg-slate-50 text-slate-500">
            <div class="max-w-[1400px] mx-auto px-6 py-4 text-sm flex items-center justify-between">
              <span>© <%= new Date().getFullYear() %> Admin Console</span>
            </div>
          </footer>
      </div>
  </div>
  <script defer src="/admin_public/js/admin.js"></script>
</body>

</html>