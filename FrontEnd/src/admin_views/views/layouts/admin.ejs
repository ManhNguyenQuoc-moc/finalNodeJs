<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <title>
    <%= title || "Admin Console" %>
  </title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        container: { center: true, padding: '1rem' },
        extend: {
          colors: {
            brand: {
              50: '#ecfdf5',
              100: '#d1fae5',
              200: '#a7f3d0',
              300: '#6ee7b7',
              400: '#34d399',
              500: '#10b981',
              600: '#059669',
              700: '#047857',
              800: '#065f46',
              900: '#064e3b'
            }
          },
          boxShadow: {
            soft: '0 8px 30px rgba(15,23,42,.06)',
            lift: '0 12px 32px rgba(15,23,42,.10)'
          }
        }
      }
    }
  </script>

  <!-- Lucide icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      lucide.createIcons();
    });
  </script>

  <!-- AlpineJS -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <!-- Chart.js (vẽ biểu đồ) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-cover bg-center bg-no-repeat text-slate-100 antialiased"
  style="background-image: url('/mixishop/images/home/slider_bg.png');">
  <!-- Root: full height, chia 2 cột -->
  <div class="h-screen flex bg-black/40" x-data="{
      open: true,
      mini: false,
      activePath: '<%= (typeof activePath !== " undefined" && activePath) ? activePath : "" %>' ||
    window.location.pathname
    }"
    >

    <!-- Sidebar -->
    <%- include('../partials/_sidebar') %>

      <!-- Content -->
      <div class="flex-1 flex flex-col h-screen bg-white/80 backdrop-blur-sm">
        <!-- Topbar -->
        <%- include('../partials/_topbar') %>

          <!-- Main -->
          <main class="flex-1 overflow-y-auto">
            <div class="p-6 max-w-[1600px] w-full mx-auto">
              <% if (flash && flash.success) { %>
                <!-- Alert success -->
                <% } %>

                  <% if (flash && flash.error) { %>
                    <!-- Alert error -->
                    <% } %>
                    <% if (flash.success) { %>
<div id="adminAlertSuccess" class="admin-alert alert-success show-alert">
  <%= flash.success %>
</div>
<% } %>

<% if (flash.error) { %>
<div id="adminAlertError" class="admin-alert alert-error show-alert">
  <%= flash.error %>
</div>
<% } %>

<style>
.admin-alert {
  position: fixed;
  top: 20px;
  right: 20px;
  min-width: 300px;
  padding: 15px 20px;
  border-radius: 6px;
  font-size: 15px;
  font-weight: 500;
  z-index: 99999;
  display: none;
  animation: fadeIn 0.3s ease-out;
}
.admin-alert.show-alert { display: block; }

.alert-success {
  background: #4caf50;
  color: white;
}
.alert-error {
  background: #f44336;
  color: white;
}

@keyframes fadeOut {
  from { opacity: 1; }
  to   { opacity: 0; transform: translateY(-10px); }
}
</style>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const alertBox = document.querySelector(".show-alert");
  if (alertBox) {
    setTimeout(() => {
      alertBox.style.animation = "fadeOut 0.5s forwards";
      setTimeout(() => alertBox.remove(), 500);
    }, 3000);
  }
});
</script>
                      <%- body %>
            </div>
          </main>

          <!-- Footer -->
          <footer class="shrink-0 border-t bg-slate-50/80 text-slate-500">
            <div class="max-w-[1400px] mx-auto px-6 py-4 text-sm flex items-center justify-between">
              <span>© <%= new Date().getFullYear() %> Admin Console</span>
            </div>
          </footer>
      </div>
  </div>

  <script defer src="/admin_public/js/admin.js"></script>
</body>

</html>