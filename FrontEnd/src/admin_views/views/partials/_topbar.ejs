<header
  class="sticky top-0 z-30 bg-[#0E141B]/95 backdrop-blur border-b border-white/10 shadow-xl transition-all duration-300"
  :class="!open ? 'pl-0' : (mini ? 'pl-20' : 'pl-72')">
  <div class="px-6 h-20 flex items-center justify-between gap-6">

    <!-- LEFT -->
    <div class="flex items-center gap-4 min-w-0 h-full">

      <!-- Sidebar toggle (mobile: mở/đóng, desktop: thu gọn/mở rộng) -->
      <div class="flex items-center">
        <!-- Mobile: show/hide sidebar -->
        <button class="inline-flex md:hidden items-center justify-center h-10 w-10 rounded-lg border border-white/10 bg-white/5
                 hover:bg-white/10 hover:border-emerald-400/60 text-white/80 transition-all duration-200"
          @click="open = !open" aria-label="Toggle sidebar">
          <i data-lucide="panel-left" class="h-5 w-5" x-show="!open" x-cloak></i>
          <i data-lucide="x" class="h-5 w-5" x-show="open" x-cloak></i>
        </button>

        <!-- Desktop: mini / full -->

      </div>
      <!-- Logo + Title -->
      <div class="flex items-center gap-2 px-4 md:pl-3">
        <span class="text-emerald-400 font-extrabold text-2xl tracking-tight">Mixi</span>
        <span class="text-white text-xl font-semibold tracking-tight hidden sm:inline">
          Admin
        </span>
        <span
          class="hidden lg:inline text-[13px] text-emerald-200/70 border border-emerald-500/40 rounded-full px-2 py-0.5 ml-2">
          Control center
        </span>
      </div>

      <!-- Quick Nav -->
      <nav class="hidden md:flex items-center gap-2 ml-4 text-[15px]">
        <a href="/admin" class="px-3 py-2 rounded-lg transition-all duration-200 flex items-center gap-1.5 border border-transparent
                 text-sm" :class="activePath === '/admin'
              ? 'bg-white/10 text-white border-white/20 shadow-soft'
              : 'text-white/70 hover:text-white hover:bg-white/5'">
          <i data-lucide="gauge" class="h-4 w-4"></i>
          <span>Dashboard</span>
        </a>

        <a href="/admin/products" class="px-3 py-2 rounded-lg transition-all duration-200 flex items-center gap-1.5 border border-transparent
                 text-sm" :class="activePath.startsWith('/admin/products')
              ? 'bg-white/10 text-white border-white/20 shadow-soft'
              : 'text-white/70 hover:text-white hover:bg-white/5'">
          <i data-lucide="box" class="h-4 w-4"></i>
          <span>Sản phẩm</span>
        </a>

        <a href="/admin/orders" class="px-3 py-2 rounded-lg transition-all duration-200 flex items-center gap-1.5 border border-transparent
                 text-sm" :class="activePath.startsWith('/admin/orders')
              ? 'bg-white/10 text-white border-white/20 shadow-soft'
              : 'text-white/70 hover:text-white hover:bg-white/5'">
          <i data-lucide="receipt" class="h-4 w-4"></i>
          <span>Đơn hàng</span>
        </a>

        <a href="/admin/users" class="px-3 py-2 rounded-lg transition-all duration-200 flex items-center gap-1.5 border border-transparent
                 text-sm" :class="activePath.startsWith('/admin/users')
              ? 'bg-white/10 text-white border-white/20 shadow-soft'
              : 'text-white/70 hover:text-white hover:bg-white/5'">
          <i data-lucide="users" class="h-4 w-4"></i>
          <span>Khách hàng</span>
        </a>
      </nav>
    </div>

    <!-- RIGHT ACTIONS -->
    <div class="flex items-center gap-4 relative" x-data="{ menu:false }">

      <!-- Search (desktop) -->
      <div class="hidden lg:block relative">
        <input class="h-11 w-72 bg-white/5 text-white border border-white/10 rounded-lg pl-10 pr-4
                 placeholder:text-white/40 focus:border-emerald-400 focus:ring-2
                 focus:ring-emerald-400/40 outline-none text-sm transition-all duration-200" type="search"
          placeholder="Tìm kiếm nhanh..." />
        <i data-lucide="search" class="w-4 h-4 text-white/40 absolute left-3.5 top-1/2 -translate-y-1/2"></i>
      </div>

      <!-- Notification -->
      <button class="relative h-11 w-11 grid place-items-center rounded-lg bg-white/5 border border-white/10
               hover:bg-white/10 hover:border-emerald-400/60 text-emerald-300 transition-all duration-200"
        aria-label="Thông báo">
        <i data-lucide="bell" class="h-5 w-5"></i>
        <!-- Badge demo -->
        <span
          class="absolute -top-1 -right-1 h-4 min-w-[16px] px-1 rounded-full bg-rose-500 text-[10px] font-semibold text-white grid place-items-center">
          3
        </span>
      </button>

      <!-- Account Button -->
      <button class="h-11 w-11 rounded-full bg-emerald-400 text-black font-bold text-lg shadow-lift
               hover:shadow-soft hover:brightness-95 transition-all duration-200 flex items-center justify-center"
        @click="menu = !menu" aria-haspopup="true" :aria-expanded="menu">
        <%= (admin && admin.full_name) ? admin.full_name[0].toUpperCase() : "A" %>
      </button>

      <!-- Dropdown -->
      <div x-show="menu" x-cloak @click.outside="menu = false" x-transition:enter="transition ease-out duration-150"
        x-transition:enter-start="opacity-0 scale-95 translate-y-1"
        x-transition:enter-end="opacity-100 scale-100 translate-y-0"
        x-transition:leave="transition ease-in duration-100"
        x-transition:leave-start="opacity-100 scale-100 translate-y-0"
        x-transition:leave-end="opacity-0 scale-95 translate-y-1" class="absolute right-0 top-14 w-64 bg-[#050910]/95 backdrop-blur border border-white/10
               rounded-xl shadow-xl text-white text-sm overflow-hidden">
        <div class="px-5 py-4 border-b border-white/10 bg-white/5">
          <p class="text-[11px] uppercase tracking-wide text-white/50 mb-1">
            Đăng nhập với
          </p>
          <p class="text-sm font-semibold truncate">
            <%= (admin && admin.full_name) || 'Admin' %>
          </p>
        </div>

        <a href="/admin/account/password"
          class="flex items-center gap-2 px-5 py-3 hover:bg-white/5 transition-colors duration-150">
          <i class="lucide lucide-key h-4 w-4 text-emerald-300"></i>
          <span>Đổi mật khẩu</span>
        </a>

        <form action="/admin/logout" method="post">
          <button type="submit"
            class="flex items-center gap-2 px-5 py-3 w-full hover:bg-white/5 transition-colors duration-150">
            <i class="lucide lucide-log-out h-4 w-4 text-emerald-300"></i>
            <span>Đăng xuất</span>
          </button>
        </form>
      </div>
    </div>

  </div>
</header>